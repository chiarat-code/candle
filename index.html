<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customize Your Candle</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        
        /* Styling for the candle container */
        .candle-preview { 
            margin: 20px auto; width: 150px; height: 300px; 
            border-radius: 10px; border: 2px solid black;
            display: flex; align-items: center; justify-content: center;
            position: relative;
            overflow: hidden;
        }

        /* Basic candle shapes */
        .shape { position: relative; width: 100%; height: 100%; }
        .shape.round { border-radius: 50%; background: linear-gradient(to top, #ffcc99, #ff9966); }
        .shape.square { border-radius: 0; background: linear-gradient(to top, #ffcc99, #ff9966); }
        .shape.tall { height: 400px; background: linear-gradient(to top, #ffcc99, #ff9966); }
        .shape.short { height: 200px; background: linear-gradient(to top, #ffcc99, #ff9966); }
        
        /* Wick styling */
        .wick {
            position: absolute;
            top: 10px;
            width: 5px;
            height: 50px;
            background-color: #333;
            left: 50%;
            transform: translateX(-50%);
        }

        /* Styling for the drawings */
        .drawing {
            position: absolute;
            font-size: 24px;
            color: black;
        }

        .drawing.circle {
            border-radius: 50%;
            background-color: black;
            width: 20px;
            height: 20px;
        }

        .drawing.star {
            font-size: 30px;
        }

        .drawing.heart {
            font-size: 30px;
        }

        .drawing.moon {
            font-size: 30px;
        }

        .hidden { display: none; }
    </style>
</head>
<body>
    <h2>Customize Your Candle</h2>
    
    <!-- Candle Shape Selection -->
    <div class="options">
        <label>Choose Shape:
            <select id="shape">
                <option value="round">Round</option>
                <option value="square">Square</option>
                <option value="tall">Tall</option>
                <option value="short">Short</option>
            </select>
        </label>
    </div>

    <!-- Candle Color Selection -->
    <div class="options">
        <label>Choose Color: <input type="color" id="colorPicker"></label>
    </div>

    <!-- Drawing Selection -->
    <div class="options">
        <label>Choose Drawings:
            <select id="drawing" multiple>
                <option value="circle">Circle</option>
                <option value="star">Star</option>
                <option value="heart">Heart</option>
                <option value="moon">Moon</option>
            </select>
        </label>
    </div>

    <!-- Quantity Selection for Drawings -->
    <div class="options">
        <label>How Many Drawings to Add:
            <select id="drawingQuantity">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="4">4</option>
                <option value="pattern">Pattern</option>
            </select>
        </label>
    </div>

    <button onclick="finalizeCandle()">Finish Customization</button>
    
    <h3>Live Preview</h3>
    <div class="candle-preview" id="preview">
        <div class="shape" id="candleShape"></div>
        <div id="drawingPreview" class="drawing"></div>
        <div class="wick"></div>
    </div>
    
    <h3 class="hidden" id="finalText">Your Final Candle:</h3>
    <div class="candle-preview hidden" id="finalCandle">
        <div class="shape" id="finalCandleShape"></div>
        <div id="finalDrawing" class="drawing"></div>
        <div class="wick"></div>
    </div>

    <script>
        const colorPicker = document.getElementById("colorPicker");
        const drawing = document.getElementById("drawing");
        const shape = document.getElementById("shape");
        const preview = document.getElementById("preview");
        const drawingPreview = document.getElementById("drawingPreview");
        const candleShape = document.getElementById("candleShape");
        const drawingQuantity = document.getElementById("drawingQuantity");

        // Initial shape setup
        shape.addEventListener("change", () => {
            updateCandleShape();
        });
        
        // Color change update preview
        colorPicker.addEventListener("input", () => {
            preview.style.backgroundColor = colorPicker.value;
            updateCandleShape();
        });
        
        // Drawing change update preview
        drawing.addEventListener("change", () => {
            updateDrawingPreview();
        });
        
        // Quantity change update preview
        drawingQuantity.addEventListener("change", () => {
            updateDrawingPreview();
        });

        function updateCandleShape() {
            const selectedShape = shape.value;
            candleShape.className = "shape " + selectedShape;
            candleShape.style.backgroundColor = colorPicker.value;
        }

        function updateDrawingPreview() {
            let selectedDrawings = Array.from(drawing.selectedOptions).map(option => option.value);
            let quantity = drawingQuantity.value;
            drawingPreview.innerHTML = ""; // Reset the preview

            if (quantity === "pattern") {
                let positionY = 50;
                selectedDrawings.forEach(draw => {
                    for (let i = 0; i < 5; i++) {
                        const drawingElem = document.createElement("div");
                        drawingElem.classList.add("drawing", draw);
                        drawingElem.style.top = `${positionY}px`;
                        drawingElem.style.left = `${(i * 30) + 10}px`;
                        drawingPreview.appendChild(drawingElem);
                    }
                    positionY += 50; // Move down the next pattern line
                });
            } else {
                for (let i = 0; i < quantity; i++) {
                    selectedDrawings.forEach(draw => {
                        const drawingElem = document.createElement("div");
                        drawingElem.classList.add("drawing", draw);
                        drawingElem.style.top = `${(i * 40) + 50}px`;
                        drawingElem.style.left = `${(i * 30) + 20}px`;
                        drawingPreview.appendChild(drawingElem);
                    });
                }
            }
        }

        function finalizeCandle() {
            document.getElementById("finalText").classList.remove("hidden");
            document.getElementById("finalCandle").classList.remove("hidden");
            const finalCandleShape = document.getElementById("finalCandleShape");
            finalCandleShape.className = "shape " + shape.value;
            finalCandleShape.style.backgroundColor = colorPicker.value;

            // Final drawing display
            const finalDrawing = document.getElementById("finalDrawing");
            let selectedDrawings = Array.from(drawing.selectedOptions).map(option => option.value);
            let quantity = drawingQuantity.value;
            finalDrawing.innerHTML = ""; // Reset

            if (quantity === "pattern") {
                let positionY = 50;
                selectedDrawings.forEach(draw => {
                    for (let i = 0; i < 5; i++) {
                        const drawingElem = document.createElement("div");
                        drawingElem.classList.add("drawing", draw);
                        drawingElem.style.top = `${positionY}px`;
                        drawingElem.style.left = `${(i * 30) + 10}px`;
                        finalDrawing.appendChild(drawingElem);
                    }
                    positionY += 50;
                });
            } else {
                for (let i = 0; i < quantity; i++) {
                    selectedDrawings.forEach(draw => {
                        const drawingElem = document.createElement("div");
                        drawingElem.classList.add("drawing", draw);
                        drawingElem.style.top = `${(i * 40) + 50}px`;
                        drawingElem.style.left = `${(i * 30) + 20}px`;
                        finalDrawing.appendChild(drawingElem);
                    });
                }
            }
        }
        
        // Set initial shape on page load
        updateCandleShape();
    </script>
</body>
</html>
