<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customize Your Candle</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .candle-preview { 
            margin: 20px auto; width: 150px; height: 200px; 
            border-radius: 10px; border: 2px solid black;
            display: flex; align-items: center; justify-content: center;
            position: relative;
        }
        .drawing { position: absolute; font-size: 24px; }
        .hidden { display: none; }
        .shape { position: relative; width: 100%; height: 100%; }
        .shape.round { border-radius: 50%; }
        .shape.square { border-radius: 0; }
        .shape.tall { height: 300px; }
        .shape.short { height: 100px; }
        .shape.hexagon {
            width: 150px;
            height: 150px;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
        }
    </style>
</head>
<body>
    <h2>Customize Your Candle</h2>
    
    <div class="options">
        <label>Choose Shape:
            <select id="shape">
                <option value="round">Round</option>
                <option value="square">Square</option>
                <option value="tall">Tall</option>
                <option value="short">Short</option>
                <option value="hexagon">Hexagon</option>
            </select>
        </label>
    </div>
    
    <div class="options">
        <label>Choose Color: <input type="color" id="colorPicker"></label>
    </div>
    
    <div class="options">
        <label>Choose Drawings:
            <select id="drawing" multiple>
                <option value="star">‚≠ê</option>
                <option value="heart">‚ù§Ô∏è</option>
                <option value="flower">üå∏</option>
                <option value="moon">üåô</option>
                <option value="lightning">‚ö°</option>
                <option value="smiley">üòä</option>
                <option value="sun">‚òÄÔ∏è</option>
            </select>
        </label>
    </div>
    
    <div class="options">
        <label>How Many Drawings to Add:
            <select id="drawingQuantity">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="4">4</option>
                <option value="pattern">Pattern</option>
            </select>
        </label>
    </div>
    
    <button onclick="finalizeCandle()">Finish Customization</button>
    
    <h3>Live Preview</h3>
    <div class="candle-preview" id="preview">
        <div class="shape" id="candleShape"></div>
        <div id="drawingPreview" class="drawing"></div>
    </div>
    
    <h3 class="hidden" id="finalText">Your Final Candle:</h3>
    <div class="candle-preview hidden" id="finalCandle">
        <div class="shape" id="finalCandleShape"></div>
        <div id="finalDrawing" class="drawing"></div>
    </div>
    
    <script>
        const colorPicker = document.getElementById("colorPicker");
        const drawing = document.getElementById("drawing");
        const shape = document.getElementById("shape");
        const preview = document.getElementById("preview");
        const drawingPreview = document.getElementById("drawingPreview");
        const candleShape = document.getElementById("candleShape");
        const drawingQuantity = document.getElementById("drawingQuantity");
        
        // Initial shape setup
        shape.addEventListener("change", () => {
            updateCandleShape();
        });
        
        // Color change update preview
        colorPicker.addEventListener("input", () => {
            preview.style.backgroundColor = colorPicker.value;
            updateCandleShape();
        });
        
        // Drawing change update preview
        drawing.addEventListener("change", () => {
            updateDrawingPreview();
        });
        
        // Quantity change update preview
        drawingQuantity.addEventListener("change", () => {
            updateDrawingPreview();
        });

        function updateCandleShape() {
            const selectedShape = shape.value;
            candleShape.className = "shape " + selectedShape;
            candleShape.style.backgroundColor = colorPicker.value;
        }

        function updateDrawingPreview() {
            let selectedDrawings = Array.from(drawing.selectedOptions).map(option => option.text);
            let quantity = drawingQuantity.value;
            drawingPreview.innerHTML = ""; // Reset the preview

            // Add drawings based on selected quantity
            if (quantity === "pattern") {
                // Create a repeating pattern
                selectedDrawings.forEach((draw, index) => {
                    let count = 0;
                    while (count < 5) {
                        const drawingElem = document.createElement("span");
                        drawingElem.innerText = draw;
                        drawingElem.style.position = "absolute";
                        drawingElem.style.top = `${(index + count) * 30}px`; // Space out pattern
                        drawingElem.style.left = `${count * 30}px`;
                        drawingPreview.appendChild(drawingElem);
                        count++;
                    }
                });
            } else {
                // Add a specific number of drawings
                for (let i = 0; i < quantity; i++) {
                    selectedDrawings.forEach(draw => {
                        const drawingElem = document.createElement("span");
                        drawingElem.innerText = draw;
                        drawingElem.style.position = "absolute";
                        drawingElem.style.top = `${i * 30}px`;
                        drawingElem.style.left = `${i * 30}px`;
                        drawingPreview.appendChild(drawingElem);
                    });
                }
            }
        }

        function finalizeCandle() {
            document.getElementById("finalText").classList.remove("hidden");
            document.getElementById("finalCandle").classList.remove("hidden");
            const finalCandleShape = document.getElementById("finalCandleShape");
            finalCandleShape.className = "shape " + shape.value;
            finalCandleShape.style.backgroundColor = colorPicker.value;

            // Final drawing display
            const finalDrawing = document.getElementById("finalDrawing");
            let selectedDrawings = Array.from(drawing.selectedOptions).map(option => option.text);
            let quantity = drawingQuantity.value;
            finalDrawing.innerHTML = ""; // Reset

            // Add drawings to final preview
            if (quantity === "pattern") {
                selectedDrawings.forEach((draw, index) => {
                    let count = 0;
                    while (count < 5) {
                        const drawingElem = document.createElement("span");
                        drawingElem.innerText = draw;
                        drawingElem.style.position = "absolute";
                        drawingElem.style.top = `${(index + count) * 30}px`;
                        drawingElem.style.left = `${count * 30}px`;
                        finalDrawing.appendChild(drawingElem);
                        count++;
                    }
                });
            } else {
                for (let i = 0; i < quantity; i++) {
                    selectedDrawings.forEach(draw => {
                        const drawingElem = document.createElement("span");
                        drawingElem.innerText = draw;
                        drawingElem.style.position = "absolute";
                        drawingElem.style.top = `${i * 30}px`;
                        drawingElem.style.left = `${i * 30}px`;
                        finalDrawing.appendChild(drawingElem);
                    });
                }
            }
        }
        
        // Set initial shape on page load
        updateCandleShape();
    </script>
</body>
</html>
